# 更新日志

## [1.7.7] - 2024-12-19

### 稳定性改进
- 🛡️ **增强错误处理**: 为所有DOM操作添加安全检查，避免与页面其他脚本冲突
- 🔒 **防护机制**: 添加element有效性检查，防止操作已移除的DOM元素
- ⚡ **异步安全**: 在异步操作后重新验证DOM元素状态
- 🎯 **精确错误定位**: 为每个函数添加try-catch包装，提供详细错误信息

### 技术优化
- 🔧 优化showWordTooltip函数，添加element连接性检查
- 🛠️ 改进createTooltip函数，确保document.body存在性验证
- 📦 强化事件处理函数，防止undefined属性访问
- 🎨 优化初始化流程，单个功能失败不影响其他功能

### 兼容性提升
- 🌐 解决与百度搜索等复杂页面的JavaScript冲突问题
- 📱 提高在各种网站环境下的稳定性
- 🔄 增强扩展的容错能力和恢复机制

---

## [1.7.6] - 2024-12-19

### 用户体验统一
- 🖱️ **网页弹窗悬停隐藏**: 网页上的翻译弹窗现在也支持鼠标离开时自动隐藏
- 🎯 **统一交互体验**: 网页翻译弹窗与收藏页面弹窗现在具有一致的悬停行为
- 💫 **智能状态管理**: 使用data-hover属性精确控制网页弹窗的显示/隐藏状态
- ⚡ **响应式隐藏**: 鼠标离开单词或弹窗时，200ms延迟后自动隐藏

### 技术改进
- 🔧 统一content.js和popup.js的悬停事件处理逻辑
- 🛠️ 使用data-hover属性替代:hover伪类检查，提高可靠性
- 📦 移除网页弹窗的点击外部关闭逻辑，简化代码结构
- 🎨 保持所有原有功能完整性，仅优化交互方式

---

## [1.7.5] - 2024-12-19

### 用户体验优化
- 🖱️ **改进收藏页面交互**: 将点击显示单词详情改为鼠标悬停显示
- ⚡ **即时响应**: 鼠标移动到收藏的单词上即可立即查看详细信息
- 🎯 **智能隐藏**: 鼠标离开单词或详情弹窗时自动隐藏，操作更流畅
- 💫 **平滑过渡**: 添加200ms延迟，给用户足够时间在单词和弹窗间移动

### 技术改进
- 🔧 优化事件处理逻辑，使用mouseenter/mouseleave替代click事件
- 🛠️ 改进提示框的悬停状态管理，使用data-hover属性精确控制
- 📦 移除不必要的点击外部关闭逻辑，简化代码结构

---

## [1.7.4] - 2024-12-19

### 问题修复
- 🔧 **修复网页翻译弹窗滚动问题**: 解决在网页上选词翻译时，弹窗内容过多无法滚动查看的问题
- 📱 **优化网页弹窗定位**: 智能调整网页翻译弹窗位置，避免超出屏幕边界
- 🎨 **统一滚动条样式**: 为网页翻译弹窗添加与popup一致的美观滚动条
- 📏 **响应式高度控制**: 网页翻译弹窗也支持最大高度80vh限制

### 技术改进
- 🛠️ 优化content.js中的createTooltip函数，支持智能定位
- 📦 在content.css中添加滚动条美化样式
- 🔄 统一popup和网页翻译的用户体验

---

## [1.7.3] - 2024-12-19

### 问题修复
- 🔧 **修复弹窗滚动问题**: 解决收藏单词详情弹窗内容过多时无法滚动查看的问题
- 📱 **优化弹窗定位**: 智能调整弹窗位置，避免超出屏幕边界
- 🎨 **美化滚动条**: 为弹窗添加美观的自定义滚动条样式
- 📏 **响应式高度**: 弹窗最大高度限制为80vh，确保在不同屏幕尺寸下都能正常显示

### 技术改进
- 🛠️ 优化弹窗定位算法，支持上下左右智能调整
- 📦 添加滚动条美化CSS，提升用户体验

---

## [1.7.2] - 2024-12-19

### 功能完善
- 🔍 **完善收藏单词详情显示**: 现在点击收藏单词可查看完整的翻译信息
- 📚 **词典功能增强**: 显示词性分类、英文定义、使用例句、同义词等详细信息
- 🌐 **API集成优化**: 集成Dictionary API获取专业词典数据
- 🎨 **UI样式完善**: 添加词性、例句、同义词等元素的完整样式支持

### 技术优化
- 🔧 完全复用content.js中的翻译逻辑和UI组件
- 🛠️ 优化翻译数据获取，支持MyMemory和Dictionary API
- 📦 添加完整的CSS样式支持，保持视觉一致性

---

## [1.7.1] - 2024-12-19

### 新增功能
- 🔍 **收藏单词详情查看**: 在扩展弹出页面中点击收藏的单词可查看详细信息
- 📖 **UI复用**: 复用网页划词翻译的UI组件，保持一致的用户体验
- 🔊 **完整功能**: 支持发音播放、音标显示、翻译信息等完整功能
- ❤️ **收藏管理**: 在详情弹窗中可直接取消收藏单词

### 功能改进
- 🎯 为收藏单词列表中的单词文本添加了点击交互
- 💫 优化了弹窗定位和显示效果
- 🎨 添加了加载状态和错误状态的友好提示

### 技术优化
- 🔧 在popup.js中实现了翻译UI组件的复用
- 🛠️ 优化了数据获取逻辑，优先使用本地缓存
- 📦 添加了完整的事件处理和状态管理

---

## [1.7.0] - 2024-12-19

### 新增功能
- ✨ **长文本翻译功能**: 选中包含英文的长句或段落时，自动显示蓝色🌐翻译按钮
- 🎯 **智能识别**: 自动区分单词翻译（📖图标）和文本翻译（🌐图标）
- 🌐 **多源文本翻译**: 支持微软翻译和MyMemory翻译API进行长文本翻译
- 💫 **优雅界面**: 为长文本翻译设计了专门的UI界面，清晰显示原文和译文

### 功能改进
- 📝 优化了文本选择逻辑，更准确地识别英文内容
- 🎨 为长文本翻译按钮添加了独特的蓝色渐变样式
- 📱 改进了翻译结果的显示布局，支持长文本的良好展示

### 技术优化
- 🔧 重构了翻译逻辑，分离单词翻译和文本翻译功能
- 🛠️ 添加了专门的长文本翻译API调用函数
- 📦 优化了代码结构，提高了可维护性

---

## [1.6.5] - 之前版本

### 功能特点
- 🔍 智能单词识别和翻译
- 📖 多源翻译API支持
- ❤️ 单词收藏功能
- 🎨 智能高亮显示
- 🔊 双语音发音支持
- 💾 数据持久化和备份 